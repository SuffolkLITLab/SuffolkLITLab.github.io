<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="http://www.facebook.com/2008/fbml">
<HEAD>
	<title>How To</title>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108858221-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-108858221-1');
	</script>
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta name="apple-mobile-web-app-capable" content="no" />
  <link rel="apple-touch-icon" href="../images/icon_300.png"/>
	<meta property="og:type" content="website"/>
	<meta property="og:title" content="How To"/>
	<meta property="og:description" content=""/>
	<meta property="og:image" content="../images/lasm_2-1.jpg"/>

	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@SuffolkLITLab">
	<meta name="twitter:creator" content="@SuffolkLITLab">
	<meta name="twitter:title" content="How To">
	<meta name="twitter:description" content="">
	<meta name="twitter:image" content="http://www.davidcolarusso.com/images/lasm_2-1.jpg"/>

	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
	<!--<link rel="apple-touch-icon" href="images/icon.png"/> -->
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
  <script src="js_bin/Countable.js"></script>
  <script>
      window.scrollTo(0,0)
      var test_var = [];

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        }
      }

      function showPosition(position) {
        console.log("Lat:"+position.coords.latitude+" Lon:"+position.coords.longitude)
        var location_uri = "https://nominatim.openstreetmap.org/reverse?lat="+position.coords.latitude+"&lon="+position.coords.longitude+"&format=json";
        console.log(location_uri)
        $.ajax({
          type: "GET",
          url: location_uri,
          success: function(data) {
             if (data.address.country_code == "us") {
                $('#unknown_jur').hide()
                $('#jurisdiction').html(data.address.state);
                $('#auto_jur').val('yes');
                $('#known_jur').show()
             }
           },
           error: function (jqXHR, exception) {
               console.log(jqXHR.responseText)
           }
          });
      }
      getLocation();

      function ping() {
        $('#response').hide()
        $('#loading').show()
        //setTimeout(function(){ $('#loading').hide(); $('#response').show() }, 1500);
      }

      function make_query() {

        var Data = { text: $("#text").val() }

        if ($('#save-id').prop('checked')) {
          Object.assign(Data, {'save-text': 1})
        } else {
          Object.assign(Data, {'save-text': 0})
        }

        if ($('#cutoff-lower').val() != "") {
          Object.assign(Data, {'cutoff-lower': $('#cutoff-lower').val()*1})
        }
        if ($('#cutoff-pred').val() != "") {
          Object.assign(Data, {'cutoff-pred': $('#cutoff-pred').val()*1})
        }
        if ($('#cutoff-upper').val() != "") {
          Object.assign(Data, {'cutoff-upper': $('#cutoff-upper').val()*1})
        }

        console.log(Data)
        $.ajax({
          type: "POST",
          url: "https://spot.suffolklitlab.org/v0/entities-terminal/",
          data: JSON.stringify(Data),
          dataType: "json",
          headers: {
            "Authorization": "Bearer "+$("#bearer").val()
          },
          contentType : "application/json",
          success: function(data) {
            console.log(data)
            $('#loading').hide();
            test_var = data;
            $('#response').html("<h2>It looks like you may be looking for help with...</h2>")
            data["labels"].forEach(function(element) {
              $('#response').html($('#response').html()+"<div style=\"margin:15px 0px; padding:10px 5px 5px 5px; border-top: solid 1px #ccc;\"><table width=\"100%\"><tr><td width=\"1%\" valign=\"top\"><div style=\"float:left;margin:0 10px 0px 3px;\"><img src=\"\" width=\"60px\" height=\"60px\"></div></td><td><span class=\"subtitle\" style=\"float:right;margin:0px 0 4px 0;font-weight: normal;\"><a href=\"\" target=\"_blank\">How sure?</a>&nbsp;&nbsp;"+Math.round(element["lower"]*100)+"%-"+Math.round(element["upper"]*100)+"%</span><span style=\"font-weight: bold; font-size:18px;\">"+element["name"]+"</span><p>Help me find relevant: (1) <a href=\"https://www.avvo.com/business-lawyer/"+$('#man_jur').val()+".html\" target=\"_blank\">attorneys</a>; (2) <a href=\"https://www.google.com/search?q=court+"+element["name"]+"+site%3A*"+$('#man_jur').val()+".us&oq=site%3A*ma.us\" target=\"_blank\">articles</a>; (3) <a href=\"https://community.lawyer/search?jurisdictions[]="+"&taxonomy_categories[]="+element["name"]+"\" target=\"_blank\">interactive self-help</a>.</p></td></tr></table></div>")
              console.log(element);
            });
            //$('#response').html(JSON.stringify(data))
            $('#response').show()
          },
          error: function (jqXHR, exception) {
            err = JSON.parse(jqXHR.responseText)
            console.log(err)
            $('#loading').hide();
            if (err["message"]) {
              $('#response').html("<h2>There was an error...</h2><ul><li>"+err["message"]+"</li></ul>")
            } else {
              $('#response').html("<h2>There was an error...</h2>")
            }
            $('#response').show()
          }
        });
      }

      function scroll2Q(id,speed) {
    		var top = document.getElementById(id).offsetTop; //Getting Y of target element
    		//console.log("Jump to Y for ("+id+"): "+top);
    		//adapted from https://github.com/Yappli/smooth-scroll
    		var moving_frequency = 5; // Affects performance !
    		var hop_count = speed/moving_frequency
            var getScrollTopDocumentAtBegin = document.documentElement.scrollTop + document.body.scrollTop;
            var gap = (top - getScrollTopDocumentAtBegin) / hop_count;
    		for(var i = 1; i <= hop_count; i++)
            {
            	(function()
               	{
               		var hop_top_position = gap*i;
               	    setTimeout(function(){  window.scrollTo(0, hop_top_position + getScrollTopDocumentAtBegin); }, moving_frequency*i);
               	 })();
            }
    	}
  </script>

</HEAD>
<BODY BGCOLOR="#ffffff" BACKGROUND="" MARGINWIDTH="0" MARGINHEIGHT="0" onLoad="document.getElementById('text').focus();">
<div class="content">

  <div id="icon" style="background-size: 100px 100px;background-image: url('../images/seal.jpg');">
    <a href="/"><img src="../images/space.gif" width="100px" height="100px;" border="0"/></a>
  </div>

  <p>Spot is an NSMIv2 entity/issue spotter built by Suffolk University's Legal Innovation and Technology (LIT) Lab. Spot builds upon data from the Learned Hands online game, a partnership between the LIT Lab and Stanford's Legal Design Lab. Learned Hands aims to crowdsource the labeling of laypeople's legal questions for the training of machine learning (ML) classifiers like Spot. When complete, Spot will be made available for free to non-profit &amp; <i>pro bono</i> legal service providers. What follows is a sample web app. built with the Spot API. <b>The following is presented for demonstration purposes only, and should not be relied on. By its nature, it is incomplete and potentially inaccurate.</b></p>

	<h1 style="text-align:center;margin:25px 0px 0px 0px;text-align:left;">What seems to be the problem?</h1>
  <div style="margin:3px 0 4px 0;font-weight: normal;"><span class="subtitle"> 150 to 250 word replies tend to get the best results.</span>
  <span class="subtitle" style="float:right;">&nbsp;&nbsp;<span id="result__words">0</span> words</span>
  </div>

<form id="thisForm" name="thisForm">

<textarea name='text' id="text" style="width:100%;height:150px;font-size:15px;padding:5px;box-sizing: border-box;"></textarea>

<div style="padding:5px 0 8px 0;"><input id="save-id" name="save-id" type="checkbox" CHECKED><span class="subtitle"><label for="save-id"> Use my reply to help people facing similar issues. <a href="">Learn more.</a></label></span></div>

<p id="unknown_jur">Where did this happen/is this taking place?&nbsp;&nbsp;
  <select id="man_jur">
    <option value="0">Choose a Location (US only)</option>
    <option value="AL">Alabama </option>
    <option value="AK">Alaska </option>
    <option value="AS">American Samoa </option>
    <option value="AZ">Arizona </option>
    <option value="AR">Arkansas </option>
    <option value="CA">California </option>
    <option value="CO">Colorado </option>
    <option value="CT">Connecticut </option>
    <option value="DE">Delaware </option>
    <option value="DC">District of Columbia </option>
    <option value="FL">Florida </option>
    <option value="GA">Georgia </option>
    <option value="GU">Guam	</option>
    <option value="HI">Hawaii </option>
    <option value="ID">Idaho </option>
    <option value="IL">Illinois </option>
    <option value="IN">Indiana </option>
    <option value="IA">Iowa </option>
    <option value="KS">Kansas </option>
    <option value="KY">Kentucky </option>
    <option value="LA">Louisiana </option>
    <option value="ME">Maine </option>
    <option value="MD">Maryland </option>
    <option value="MA">Massachusetts </option>
    <option value="MI">Michigan </option>
    <option value="MN">Minnesota </option>
    <option value="MS">Mississippi </option>
    <option value="MO">Missouri </option>
    <option value="MT">Montana </option>
    <option value="NE">Nebraska </option>
    <option value="NV">Nevada </option>
    <option value="NH">New Hampshire </option>
    <option value="NJ">New Jersey </option>
    <option value="NM">New Mexico </option>
    <option value="NY">New York </option>
    <option value="NC">North Carolina </option>
    <option value="ND">North Dakota </option>
    <option value="MP">Northern Mariana Islands </option>
    <option value="OH">Ohio </option>
    <option value="OK">Oklahoma </option>
    <option value="OR">Oregon </option>
    <option value="PA">Pennsylvania </option>
    <option value="PR">Puerto Rico </option>
    <option value="RI">Rhode Island </option>
    <option value="SC">South Carolina </option>
    <option value="SD">South Dakota </option>
    <option value="TN">Tennessee </option>
    <option value="TX">Texas </option>
    <option value="UT">Utah </option>
    <option value="VT">Vermont </option>
    <option value="VA">Virginia </option>
    <option value="VI">Virgin Islands </option>
    <option value="WA">Washington </option>
    <option value="WV">West Virginia </option>
    <option value="WI">Wisconsin </option>
    <option value="WY">Wyoming </option>
  </select>
</p>

<p id="known_jur" style="display:none;">Is this taking place/did this happen in <b id="jurisdiction">Massachusetts</b>?&nbsp;&nbsp;
  <select id="auto_jur">
    <option value="yes">Yes</option>
    <option value="AL">No, Alabama </option>
    <option value="AK">No, Alaska </option>
    <option value="AS">No, American Samoa </option>
    <option value="AZ">No, Arizona </option>
    <option value="AR">No, Arkansas </option>
    <option value="CA">No, California </option>
    <option value="CO">No, Colorado </option>
    <option value="CT">No, Connecticut </option>
    <option value="DE">No, Delaware </option>
    <option value="DC">No, District of Columbia </option>
    <option value="FL">No, Florida </option>
    <option value="GA">No, Georgia </option>
    <option value="GU">No, Guam	</option>
    <option value="HI">No, Hawaii </option>
    <option value="ID">No, Idaho </option>
    <option value="IL">No, Illinois </option>
    <option value="IN">No, Indiana </option>
    <option value="IA">No, Iowa </option>
    <option value="KS">No, Kansas </option>
    <option value="KY">No, Kentucky </option>
    <option value="LA">No, Louisiana </option>
    <option value="ME">No, Maine </option>
    <option value="MD">No, Maryland </option>
    <option value="MA">No, Massachusetts </option>
    <option value="MI">No, Michigan </option>
    <option value="MN">No, Minnesota </option>
    <option value="MS">No, Mississippi </option>
    <option value="MO">No, Missouri </option>
    <option value="MT">No, Montana </option>
    <option value="NE">No, Nebraska </option>
    <option value="NV">No, Nevada </option>
    <option value="NH">No, New Hampshire </option>
    <option value="NJ">No, New Jersey </option>
    <option value="NM">No, New Mexico </option>
    <option value="NY">No, New York </option>
    <option value="NC">No, North Carolina </option>
    <option value="ND">No, North Dakota </option>
    <option value="MP">No, Northern Mariana Islands </option>
    <option value="OH">No, Ohio </option>
    <option value="OK">No, Oklahoma </option>
    <option value="OR">No, Oregon </option>
    <option value="PA">No, Pennsylvania </option>
    <option value="PR">No, Puerto Rico </option>
    <option value="RI">No, Rhode Island </option>
    <option value="SC">No, South Carolina </option>
    <option value="SD">No, South Dakota </option>
    <option value="TN">No, Tennessee </option>
    <option value="TX">No, Texas </option>
    <option value="UT">No, Utah </option>
    <option value="VT">No, Vermont </option>
    <option value="VA">No, Virginia </option>
    <option value="VI">No, Virgin Islands </option>
    <option value="WA">No, Washington </option>
    <option value="WV">No, West Virginia </option>
    <option value="WI">No, Wisconsin </option>
    <option value="WY">No, Wyoming </option>
  </select>
</p>


<p style="margin:0px 0px 5px 0px;">
<input type="button" style="width:100%;padding:5px;;" value="SEND" onCLick="ping();make_query();scroll2Q('output',900);"/>
</p>

<div id="output" style="float:left;width:100%;">

<div id="loading" style="display:none;width:100%;margin:0px auto;text-align:center;">
<img src="https://media2.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.webp?cid=790b76115caab08a5673553751aede9b" width="200px;"/>
</div>

<div id="response" style="float:left;display:none;width:100%;margin:20px auto;">
</div>

</div>


<div style="float:left;background:#eee;width:100%;margin:30px 0 0 0;padding:0 15px;box-sizing: border-box;border: solid 1px #555;">
<h3>For testing purposes only: </h3>
<p>
Key: <input id='bearer' name='bearer' style="width:250px;" value=""> ----
Upper: <input type=number id='cutoff-upper' name='cutoff-upper' style="width:45px;" value="0.5"> ----
Pred: <input type=number id='cutoff-pred' name='cutoff-pred' style="width:45px;" value="0.5"> ----
Lower: <input type=number id='cutoff-lower' name='cutoff-lower' style="width:45px;" value="0.05">
</p>
</div>

</form>
	<div class="footer" style="margin-bottom:100%">
    <a href="/"><img src="../images/blue_logo.png" width="50px" align="left" border="0"/></a>
    <font size=-1><a href="mailto:litlab@suffolk\.edu">Email</a> | <a href="https://github.com/SuffolkLITLab" target="_blank">GitHub</a> | <a href="/terms" target="_blank">Terms &amp; Privacy</a> | <a href="/credits">Credits</a></font>
	</div>

<script>
  // http://sacha.me/Countable/docs/

  var area = document.getElementById('text');

  function callback (counter) {
    console.log(counter);
    $('#result__words').html(counter.words);
  }

  Countable.live(area, callback);
</script>
</BODY>
</HTML>
